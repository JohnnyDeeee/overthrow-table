<h1>{{title}}</h1>

<div class="accordion" id="addTownAccordion">
    <div class="card">
        <div class="card-header" id="addTownCard">
            <h2 class="mb-0 text-center">
                <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseForm" aria-expanded="true" aria-controls="collapseForm">
                    Add new Town
                </button>
            </h2>
        </div>

        <div id="collapseForm" class="collapse" aria-labelledby="addTownCard" data-parent="#addTownAccordion">
            <form id="addTownForm" class="card-body" action="/towns" method="post">
                <div class="form-group row">
                    <label for="townName" class="col-form-label col-5">Name</label>
                    <div class="col">
                        <input type="text" class="form-control" id="townName" name="townName">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="townStability" class="col-form-label col-5">Stability</label>
                    <div class="col-4">
                        <input type="number" class="form-control" id="townStability" name="townStability">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="townPopulation" class="col-form-label col-5">Population</label>
                    <div class="col-4">
                        <input type="number" class="form-control" id="townPopulation" name="townPopulation">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="townSupport" class="col-form-label col-5">Support</label>
                    <div class="col-4">
                        <input type="number" class="form-control" id="townSupport" name="townSupport">
                    </div>
                </div>
                <div class="d-flex justify-content-end">
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>
</div>

<table data-toggle="table"
       data-pagination="true"
       data-search="true"
       data-page-list="[10,25,50,100,all]"
       data-pagination-v-align="top"
       data-show-columns="true"
       data-show-columns-toggle-all="true"
       data-detail-view="true"
       data-detail-view-icon="false"
       data-detail-view-by-click="true"
       data-detail-formatter="detailFormatter">
    <thead class="thead-light">
    <tr>
        <th data-field="id" data-sortable="true">ID</th>
        <th data-field="name" data-sortable="true">Name</th>
        <th data-field="stability" data-sortable="true">Stability</th>
        <th data-field="population" data-sortable="true">Population</th>
        <th data-field="support" data-sortable="true">Support</th>
    </tr>
    </thead>
    <tbody>
    {{#each towns}}
        <tr>
            <td>{{id}}</td>
            <td>{{name}}</td>
            <td>{{stability}}</td>
            <td>{{population}}</td>
            <td>{{support}}</td>
        </tr>
    {{/each}}
    </tbody>
</table>

<script>
    function detailFormatter(index, row) {
        let html = [];

        console.log(row);

        html.push(`\
        <form action="/towns/delete/${row.id}" method="post">\
            <button class="btn btn-danger" type="submit">Delete</button>\
        </form>\
        `);

        return html.join('');
    }
</script>